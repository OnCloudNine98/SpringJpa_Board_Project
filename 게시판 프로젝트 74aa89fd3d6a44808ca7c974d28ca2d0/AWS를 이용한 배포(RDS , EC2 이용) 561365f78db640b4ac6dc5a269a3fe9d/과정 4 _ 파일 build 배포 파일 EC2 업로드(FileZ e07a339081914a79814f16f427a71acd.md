# 과정 4 _ 파일 build / 배포 파일 EC2 업로드(FileZilla)

### **1. build 를 통해 배포할 .jar 파일 생성**

우측의 Gradle bar 의 Tasks>build>build 버튼을 눌러 빌드 시작

![Untitled](%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%204%20_%20%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20build%20%E1%84%87%E1%85%A2%E1%84%91%E1%85%A9%20%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20EC2%20%E1%84%8B%E1%85%A5%E1%86%B8%E1%84%85%E1%85%A9%E1%84%83%E1%85%B3(FileZ%20e07a339081914a79814f16f427a71acd/Untitled.png)

프로젝트 디렉터리의 build>libs 의 `~.jar` 파일 확인

![Untitled](%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%204%20_%20%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20build%20%E1%84%87%E1%85%A2%E1%84%91%E1%85%A9%20%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20EC2%20%E1%84%8B%E1%85%A5%E1%86%B8%E1%84%85%E1%85%A9%E1%84%83%E1%85%B3(FileZ%20e07a339081914a79814f16f427a71acd/Untitled%201.png)

### **2. Git Bash 를 통한 EC2 인스턴스의 SSH 접속**

 `ssh -i 키페어위치 ubuntu@퍼블릭ip주소` 를 Git Bash 에 입력하여 접속

![Untitled](%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%204%20_%20%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20build%20%E1%84%87%E1%85%A2%E1%84%91%E1%85%A9%20%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20EC2%20%E1%84%8B%E1%85%A5%E1%86%B8%E1%84%85%E1%85%A9%E1%84%83%E1%85%B3(FileZ%20e07a339081914a79814f16f427a71acd/Untitled%202.png)

- 기본 적으로 인스턴슬르 생성하면 SSH를 사용할 22번 포트가 열려 있음
- 퍼블릭 IP 주소는 EC2 인스턴스의 `퍼블릭 IPv4 주소`
- 키 페어 위치는 키페어를 다운 받아 보관한 위치를 의미 
(위치는 디렉터리 화면을 띄운 뒤 파일을 ubuntu 화면에 드래그 하면 디렉터리 정보가 입력)

### **3. EC2 인스턴스에 JDK 설치**

**Git Bash 에 배포파일 업로드 하기 전 생성한 EC2 인스턴스에 자바 프로젝트 구동을 위한 JDK를 설치**

```bash
sudo apt-get update //동기화
sudo apt-get install openjdk-17-jdk // 본인 자바 버전 설치
java -version //버전 확인 (나오는 버전을 통해 설치확인)
```

### **4. FileZilla의 전송 전 설정**

새 사이트 버튼을 누른 뒤 정보 입력

![Untitled](%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%204%20_%20%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20build%20%E1%84%87%E1%85%A2%E1%84%91%E1%85%A9%20%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20EC2%20%E1%84%8B%E1%85%A5%E1%86%B8%E1%84%85%E1%85%A9%E1%84%83%E1%85%B3(FileZ%20e07a339081914a79814f16f427a71acd/Untitled%203.png)

- 프로토콜은 STTP 선택
- 호스트는 EC2 인스턴스의 퍼블릭IP 입력
- 사용자는 git bash 접속 접속 할 떄 `@` 바로 앞 이름( ex. `ubuntu` )
- 로그온 유형은 키 파일 / 키 파일 인 키 파일 저장 디렉터리 설정

### **5. EC2 인스턴스로 배포파일 전송**

리모트 사이트에 임의의 디렉터리 만들어주고 배포 파일 전송(드래그)

![Untitled](%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%204%20_%20%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20build%20%E1%84%87%E1%85%A2%E1%84%91%E1%85%A9%20%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20EC2%20%E1%84%8B%E1%85%A5%E1%86%B8%E1%84%85%E1%85%A9%E1%84%83%E1%85%B3(FileZ%20e07a339081914a79814f16f427a71acd/Untitled%204.png)

> 왼 쪽이 본인 로컬 컴퓨터 / 오른쪽이 EC2 인스턴스(가상 컴퓨터)
> 

### **5. 다시 Git Bash 를 통해 전송 된 배포 파일 실행(사이트 배포)**

`cd` 명령어로 **FileZilla** 에서 생성한 디렉터리로 이동 후 
`java -jar 파일이름.jar` 명령어를 통해 전송한 배포 파일 실행

![Untitled](%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%204%20_%20%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20build%20%E1%84%87%E1%85%A2%E1%84%91%E1%85%A9%20%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20EC2%20%E1%84%8B%E1%85%A5%E1%86%B8%E1%84%85%E1%85%A9%E1%84%83%E1%85%B3(FileZ%20e07a339081914a79814f16f427a71acd/Untitled%205.png)

### **6. 사이트 접속**

`퍼블릭 IP:8080` 을 주소에 입력하여 사이트 접속

![Untitled](%E1%84%80%E1%85%AA%E1%84%8C%E1%85%A5%E1%86%BC%204%20_%20%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20build%20%E1%84%87%E1%85%A2%E1%84%91%E1%85%A9%20%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20EC2%20%E1%84%8B%E1%85%A5%E1%86%B8%E1%84%85%E1%85%A9%E1%84%83%E1%85%B3(FileZ%20e07a339081914a79814f16f427a71acd/Untitled%206.png)